import "config.pkl"
import "common.pkl"

hidden modules: List<String>

name = "Lint"

on = new config.OnTrigger {
    push = new config.PushTriggerConfig {
        branches = List(
            "main",
            "develop",
            "release/**"
        )
    }
    pull_request = new config.PullRequestTriggerConfig {
        branches = List(
            "main",
            "develop"
        )
    }
}

jobs = new Mapping {
    ["lint"] = new config.Job {
        strategy = new config.JobStrategy {
            matrix = new Mapping {
                ["module"] = modules
            }
        }
        steps = List(
            common.checkout,
            common.setupJdk,
            common.gradle("Lint", "${{ matrix.module }}:lintVitalRelease", null)
        )
    }
}